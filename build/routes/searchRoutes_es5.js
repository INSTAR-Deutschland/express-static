var express=require("express"),searchRouter=express.Router(),elasticsearch=require("elasticsearch"),connectionString="localhost:9200",client=new elasticsearch.Client({host:connectionString,log:"trace"}),_index="wiki2_en",_type="article";searchRouter.route("/").get(function(e,r){r.render("Search",{title:"INSTAR Wiki Search",breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Search</a></li>'})}),searchRouter.route("/Results").get(function(e,r){client.search({index:_index,type:_type}).then(function(a){r.render("Search_Results",{title:"INSTAR Wiki Search Results",response:a,query:e.query.q,breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Search</a></li><li class="breadcrumb-item"><a href="/Search/Results/">Search Results</a></li>'})},function(e){console.trace(e.message),r.render("Search_Results",{title:"INSTAR Wiki Search Results",response:e.message,breadcrumbs:'<li class="breadcrumb-item"><a href="/">Home</a></li><li class="breadcrumb-item"><a href="/Search/">Search</a></li><li class="breadcrumb-item"><a href="/Search/Results/">Search Results</a></li>'})})}),module.exports=searchRouter;